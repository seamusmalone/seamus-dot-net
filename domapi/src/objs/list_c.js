// Copyright 2001-2003, Nebiru Software
// www.domapi.com
function List(){this.clear()};List.prototype.getLength=function(){return this.names.length};List.prototype.clear=function(){this.names=[];this.values=[]};List.prototype.rPair=function(n,v){if(typeof v!="undefined")return [n,v];var t=n.split("=");if(t.length!=2)return [n,n];return [t[0],t[1]]};List.prototype.add=function(n,v){var t=this.rPair(n,v);this.names.push(t[0]);this.values.push(t[1])};List.prototype.insert=function(i,n,v){var t=this.rPair(n,v);this.names.insert(i,t[0]);this.values.insert(i,t[1])};List.prototype.deleteItem=function(i){this.names.deleteItem(i);this.values.deleteItem(i)};List.prototype.reverse=function(){this.names.reverse();this.values.reverse()};List.prototype.swapItems=function(i,j){var t;t=this.names[i];this.names[i]=this.names[j];this.names[j]=t;t=this.values[i];this.values[i]=this.values[j];this.values[j]=t};List.prototype.sortByName=function(){this._sort(0)};List.prototype.sortByValue=function(){this._sort(1)};List.prototype._sort=function(k){var b,n1,n2;for(var a=0;a<this.names.length-1;a++)for(b=a+1;b<this.names.length;b++){n1=k?this.values[a]:this.names[a];n2=k?this.values[b]:this.names[b];if(n1>n2)this.swapItems(a,b)}};List.prototype.findNameByValue=function(s){var i=this.values.indexOf(s);return i==-1?null:this.names[i]};List.prototype.findValueByName=function(s){var i=this.names.indexOf(s);return i==-1?null:this.values[i]};List.prototype.loadFromString=function(s,d1,d2,append){d1=core.rVal(d1,"\n");d2=core.rVal(d2,"=");var t;var lines=s.split(d1);if(!append)this.clear();for(var a=0;a<lines.length;a++){t=lines[a].split(d2);this.add(t[0],t[1])}};List.prototype.saveToString=function(d1,d2,doEscape){d1=core.rVal(d1,"\n");d2=core.rVal(d2,"=");var r="";for(var a=0;a<this.names.length;a++){if(r!="")r+=d1;r+=(doEscape?escape(this.names[a]):this.names[a])+d2+(doEscape?escape(this.values[a]):this.values[a])}return r};List.prototype.saveToSelect=function(s,append){var o=s.options;if(!append)o.length=0;var i=o.length;for(var a=0;a<this.names.length;a++){o[a+i]=new Option(this.names[a],this.values[a])}};List.prototype.loadFromSelect=function(s,append){if(!append)this.clear();var o=s.options;for(var a=0;a<s.length;a++)this.add(s[a].text,s[a].value)};List.prototype.loadFromURLParams=function(append){if(!append)this.clear();var s=location.search.split("?");if(s.length<2)return;var p=s[1].split("&");for(var a=0;a<p.length;a++)this.add(p[a])};List.prototype.loadFromForm=function(f,append){if(!append)this.clear();var e=f.elements;var b,o;for(var a=0;a<e.length;a++)if(e[a].name!=""){if(e[a].type.toUpperCase()=="SELECT"){o=e[a].options;for(var b=0;b<o.length;b++)if(o[b].selected)this.add(e[a].name,o[b].value)}else this.add(e[a].name,e[a].value)}};List.prototype.saveToXML=function(root,pretty){root=core.rVal(root,"List");pretty=pretty?"\n":"";var r='<'+root+' length="'+this.names.length+'">'+pretty;for(var a=0;a<this.names.length;a++){r+='<item>'+pretty+'<name>'+this.names[a]+'</name>'+pretty+'<value>'+this.values[a]+'</value>'+pretty+'</item>'+pretty}return r+'</'+root+'>'};
