// Copyright 2001-2003, Nebiru Software
// www.domapi.com
core.registerComponent("progressbar");function Progressbar(arg){var k=core.rVal(arg["k"],"HORZ");if(k=="VERT"){arg.w=core.rInt(arg["w"],20);arg.h=core.rInt(arg["h"],143)}else{arg.w=core.rInt(arg["w"],143);arg.h=core.rInt(arg["h"],20)}var e=core._component(arg,"progressbar");e.bar=core.createElm(e,0,0);e.gobo=core.createElm(e,0,0);e.position=0;e.kind=k;e.max=100;e.quanta=1;e.setOverflow("hidden");e.reDraw();e.setPosition();return e};core.comps.progressbar.reDraw=function(){this.progressbarReDraw();this.onredraw()};core.comps.progressbar.progressbarReDraw=function(){this.setB(this.theme.bdrWidth);this.style.borderStyle=this.theme.bdrSolid;this.style.borderColor=this.theme.getInset();this.setBgColor(this.theme.ctrlBgColor);this.bar.setBgColor(this.theme.selBgColor);this.bar.setM(1);this.bar.setH(this.getH()-(core.rInt(this.theme.bdrWidth)*2)-2);this.bar.setW(this.getW()-(core.rInt(this.theme.bdrWidth)*2)-2);this.gobo.setW(this.getW());this.gobo.setH(this.getH());this.gobo.setBgColor(this.theme.ctrlBgColor)};core.comps.progressbar.setPosition=function(p){this.position=p;p=Math.round((core.rInt(p)/this.max)*100);var v=(this.kind=="HORZ"?this.getW():this.getH());v=Math.round(v*(p/100));if(this.kind=="HORZ")this.gobo.setX(this.quantize(v,this.quanta));else{var b=this.getB();this.gobo.setY(-this.quantize(v,this.quanta)-b[0]-b[2])}};core.comps.progressbar.setImage=function(s){this.bar.style.backgroundImage="url("+core.rVal(s)+")";this.bar.style.backgroundRepeat="repeat"};core.comps.progressbar.quantize=function(x,q){return Math.floor(x/q)*q};
