// Copyright 2001-2003, Nebiru Software
// www.domapi.com
core.registerComponent("tabset");core.loadUnit("label");function Tabset(arg){var e=core._component(arg,"tabset");e.tabT=core.rTheme(arg["tabTheme"]);e.tabs=[];e.tabW="auto";e.tabH="auto";e.tabAlign="left";e.tabVAlign="top";e.orientation="horizontal";e.tabType="tab";e.tabPadding="3px";e.tabMargin="2px";e.paneManage="visibility";e.flat=false;e.doBorder=false;e.onchange=function(i){};e.onbeforechange=function(i){return true};e.selIndex=0;core.disallowSelect(e);e.reDraw();return e};core.comps.tabset.reDraw=function(){this.tabsetReDraw();this.onredraw()};core.comps.tabset.tabsetReDraw=function(){var t=this.theme;var s=this.style;s.borderWidth=t.bdrWidth;s.borderStyle=this.doBorder?t.bdrSolid:"none";s.borderColor=t.getOutset();s.textAlign=this.tabAlign;this.setBgColor(t.ctrlBgColor);this.setColor(t.ctrlFgColor);for(var a=0;a<this.tabs.length;a++)this.reDrawTab(this.tabs[a]);this.layoutTabs();this.managePanes()};core.comps.tabset.reDrawTab=function(e){var t=this.tabT;var s=e.style;s.borderWidth=t.bdrWidth;s.borderStyle=t.bdrSolid;e.setTextAlign("center");e.setVerticalAlign("middle");s.font=t.font;e.labelReDraw();s.cursor="default";this.colorTab(e)};core.comps.tabset.colorTab=function(e){var t=this.tabT;var s=e.style;switch(this.tabType){case "tab":e.setBgColor(t.ctrlBgColor);s.borderColor=this.getTabBorder(e);break;case "button":e.setBgColor(e.selected?t.bdrLight:t.ctrlBgColor);e.setColor(e.selected?t.appFgColor:t.ctrlFgColor);s.borderColor=e.selected?t.getInset():t.getOutset();if(this.flat&&!e.selected)s.borderColor=t.ctrlBgColor;break}};core.comps.tabset.addTab=function(caption,pane){var e=Label({parent:this,theme:this.tabT,x:0,y:0,w:0,h:0,caption:caption});e.domAPIObjType="TAB";e.style.whiteSpace="nowrap";e.tabIndex=this.tabs.length;e.selected=e.tabIndex==0;e.pane=pane;this.tabs[e.tabIndex]=e;this.reDrawTab(e);this.sizeTab(e);core.disallowSelect(e)};core.comps.tabset.managePanes=function(){var m=this.paneManage;var h=m=="display"?"none":"hidden";var v=m=="display"?"block":"visible";var t=null;for(var a=0;a<this.tabs.length;a++){t=this.tabs[a];if(t.pane)t.pane.style[m]=(t.selected?v:h)}};core.comps.tabset.sizeTab=function(e){var d=core._textDimension(e.caption,e.style.font);var w=(this.tabW=="auto")?d[0]+(parseInt(this.tabPadding)*4):parseInt(this.tabW);var h=(this.tabH=="auto")?d[1]+(parseInt(this.tabPadding)*3):parseInt(this.tabH);e.setSize(w,h)};core.comps.tabset.layoutTabs=function(){var m=this.tabType=="button"?parseInt(this.tabMargin):0;var fullW=0;var fullH=0;for(var a=0;a<this.tabs.length;a++){fullW+=this.tabs[a].getW()+m;fullH+=this.tabs[a].getH()+m}if(this.orientation=="horizontal"){var y=m;var x=m;var h=this.getMaxH();switch(this.tabAlign){case "left":x=m;break;case "center":x=parseInt((this.getW()/2)-(fullW/2));break;case "right":x=this.getW()-fullW-m;break}switch(this.tabVAlign){case "top":y=m;break;case "middle":y=parseInt((this.getH()/2)-(h/2))-m;break;case "bottom":y=this.getH()-h-m-m;break}for(var a=0;a<this.tabs.length;a++){var e=this.tabs[a];e.moveTo(x,y);x+=e.getW()+m}}if(this.orientation=="vertical"){var y=m;var x=m;var w=this.getMaxW();switch(this.tabAlign){case "left":x=m;break;case "center":x=parseInt((this.getW()/2)-(w/2));break;case "right":x=this.getW()-w-m;break}switch(this.tabVAlign){case "top":y=m;break;case "middle":y=parseInt((this.getH()/2)-(fullH/2))-m;break;case "bottom":y=this.getH()-fullH-m-m;break}for(var a=0;a<this.tabs.length;a++){var e=this.tabs[a];e.moveTo(x,y);y+=e.getH()+m}}};core.comps.tabset.getTabBorder=function(e){var s=this.tabT;var t=s.bdrLight;var r=s.bdrDark;var b=s.bdrDark;var l=s.bdrLight;if(this.orientation=="horizontal"){if(this.tabVAlign=="top"||this.tabVAlign=="middle")b=e.selected?s.ctrlBgColor:s.bdrLight;else t=e.selected?s.ctrlBgColor:s.bdrDark}if(this.orientation=="vertical"){if(this.tabAlign=="left"||this.tabAlign=="center")r=e.selected?s.ctrlBgColor:s.bdrLight;else l=e.selected?s.ctrlBgColor:s.bdrDark}return t+" "+r+" "+b+" "+l};core.comps.tabset.getMaxW=function(){var r=0;var w=0;for(var a=0;a<this.tabs.length;a++){w=this.tabs[a].getW();if(w>r)r=w}return r};core.comps.tabset.getMaxH=function(){var r=0;var h=0;for(var a=0;a<this.tabs.length;a++){h=this.tabs[a].getH();if(h>r)r=h}return r};core.comps.tabset.setTextAlign=function(align){this.tabAlign=core.rVal(align,"left");this.reDraw()};core.comps.tabset.setVerticalAlign=function(align){this.tabVAlign=core.rVal(align,"left");this.reDraw()};core.comps.tabset.setOrientation=function(o){this.orientation=o;switch(o){case "horizontal":for(var a=0;a<this.tabs.length;a++)this.sizeTab(this.tabs[a]);break;case "vertical":var w=this.getMaxW();for(var a=0;a<this.tabs.length;a++)this.tabs[a].setW(w);break}this.reDraw()};core.comps.tabset.setType=function(t){this.tabType=t;this.reDraw()};core.comps.tabset.onmouseover=function(E){if(!this.doRollover||!this.enabled)return;var e=core.findTarget(E,"TAB");if(!e)return;if(e.selected)return;if(this.doRolloverFill)e.setBgColor(this.theme.hlBgColor);e.setColor(this.theme.hlFgColor)};core.comps.tabset.onmouseout=function(E){if(!this.doRollover||!this.enabled)return;var e=core.findTarget(E,"TAB");if(!e)return;if(this.doRolloverFill)e.setBgColor(this.theme.ctrlBgColor);e.setColor(this.theme.ctrlFgColor);this.colorTab(e)};core.comps.tabset.onmousedown=function(E){if(!this.enabled)return;var e=core.findTarget(E,"TAB");if(!e)return;if(e.selected)return;if(this.tabType=="button")e.style.borderColor=this.tabT.getInset()};core.comps.tabset.onmouseup=function(E){if(!this.enabled)return;var e=core.findTarget(E,"TAB");if(!e)return;if(e.selected)return;if(!this.onbeforechange(e.tabIndex))return;this.tabs[this.selIndex].selected=false;this.reDrawTab(this.tabs[this.selIndex]);e.selected=true;this.selIndex=e.tabIndex;this.reDrawTab(e);this.managePanes();this.onchange(e.tabIndex)};
