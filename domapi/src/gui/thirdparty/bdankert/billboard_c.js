// Copyright 2001-2003, Nebiru Software
// www.domapi.com
core.registerComponent("billboard");function Billboard(arg){arg.w=core.rInt(arg["w"],450);arg.h=core.rInt(arg["h"],80);var e=core._component(arg,"billboard");e.pauseLength=core.rInt(arg["pauseLength"],10000);e.isRandom=core.rInt(arg["isRandom"]);e.items=[];e.selIndex=-1;e.doFade=true;e.timer=null;core.disallowSelect(e);e.reDraw();return e};core.comps.billboard.reDraw=function(){this.billboardReDraw();this.onredraw()};core.comps.billboard.billboardReDraw=function(){var s=this.style;s.cursor="default";s.margin="0px";s.padding="0px";s.backgroundColor=this.theme.ctrlBgColor;s.overflow="hidden"};core.comps.billboard.add=function(ppath,ptitle,phref,ptarget){this.items[this.items.length]=new Image();var t=this.items[this.items.length-1];t.src=core.rVal(ppath);t.title=core.rVal(ptitle);t.name=core.rVal(phref,"#");t.target=core.rVal(ptarget,"_self");if(this.items.length==1)this.change()};core.comps.billboard.stop=function(reset){clearInterval(this.timer);if(reset==true){this.selIndex=-1;this.change(true)}};core.comps.billboard.start=function(){this.timer=setTimeout("document.getElementById('"+this.id+"').change()",this.pauseLength)};core.comps.billboard.onchange=function(){};core.comps.billboard.change=function(stopping){if(this.items.length>0){this.oSelIndex=this.selIndex;if(this.isRandom){this.selIndex=Math.floor(Math.random()*this.items.length)}else{this.selIndex++;if(this.selIndex>(this.items.length-1))this.selIndex=0}if(this.doFade){if(this.oSelIndex>-1){var temp='<a href="'+this.items[this.selIndex].name+'" target="'+this.items[this.selIndex].target+'" title="'+this.items[this.selIndex].title+'"><img src="'+this.items[this.oSelIndex].src+'" border="0" name="da_old'+this.domAPIIndex+'" style="z-index:1;position:absolute;top:0px;left:0px;" /><img src="'+this.items[this.selIndex].src+'" border="0" name="da_new'+this.domAPIIndex+'" style="z-index:2;position:absolute;top:0px;left:0px;" /></a>';this.fadeAmt=100}else{var temp='<a href="'+this.items[this.selIndex].name+'" target="'+this.items[this.selIndex].target+'" title="'+this.items[this.selIndex].title+'"><img src="'+this.items[this.selIndex].src+'" border="0" name="da_new'+this.domAPIIndex+'" style="z-index:2;position:absolute;top:0px;left:0px;" /></a>';this.fadeAmt=100}}else{var t=this.items[this.selIndex];var temp='<a href="'+t.name+'" target="'+t.target+'" title="'+t.title+'"><img src="'+t.src+'" border="0" /></a>'}this.setText(temp);core.comps.billboard._doFadeHelper(this.domAPIIndex);this.onchange()}if(!stopping)this.timer=setTimeout("document.getElementById('"+this.id+"').change()",this.pauseLength)};core.comps.billboard._doFadeHelper=function(elmIndex){var elm=core.bags.elms[elmIndex];if(!elm.doFade||elm.oSelIndex<0)return;elm.fadeAmt=elm.fadeAmt-5;if(elm.fadeAmt>-1){if(core.isIE){eval('document.da_old'+elmIndex+'.style.filter="alpha(opacity='+elm.fadeAmt+')"');eval('document.da_new'+elmIndex+'.style.filter="alpha(opacity='+(100-elm.fadeAmt)+')"')}else{document.da_old.style.MozOpacity=0+'%';document.da_old.style.MozOpacity=elm.fadeAmt+'%';document.da_new.style.MozOpacity=0+'%';document.da_new.style.MozOpacity=(100-elm.fadeAmt)+'%'}setTimeout("core.comps.billboard._doFadeHelper(\""+elmIndex+"\")",50)}};
