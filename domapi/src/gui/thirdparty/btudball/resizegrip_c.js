// Copyright 2001-2003, Nebiru Software
// www.domapi.com
core.loadUnit("label");core.loadUnit("drag");core.registerComponent("resizegrip");function Resizegrip(arg){var e=core._component(arg,"resizegrip");core._inherit(e,"label");e.margin=5;e.reDraw=core.comps.resizegrip.reDraw;var img=core.rVal(arg.bgImg,core.imagePath+"resizegrip/resizegrip.gif");var caption='<img src="'+img+'" width="'+core.rInt(arg.imgW,12)+'" height="'+core.rInt(arg.imgH,12)+'" border="0" />';e.setCaption(caption);e.setVerticalAlign("top");e.setTextAlign("left");e.setW(core.rVal(arg.w,14));e.setH(core.rVal(arg.h,14));var p=e.parentNode;e.setX(p.getW()-e.getW()-e.margin);e.setY(p.getH()-e.getH()-e.margin);e.minW=core.rInt(arg.minW,24);e.minH=core.rInt(arg.minH,24);e.maxW=arg.maxW;e.maxH=arg.maxH;e.fStart=arg.fStart;e.fMove=arg.fMove;e.fEnd=arg.fEnd;e.setPosition("absolute");e.on();e.reDraw();return e};core.comps.resizegrip.reDraw=function(){this.resizegripReDraw()};core.comps.resizegrip.resizegripReDraw=function(){this.labelReDraw();var p=this.parentNode;var t=this.theme;var s=this.style;s.backgroundColor=t.ctrlBgColor;s.color=t.ctrlFgColor;if(!p.reDraw){s=p.style;s.backgroundColor=t.ctrlBgColor;s.color=t.ctrlFgColor}this.onredraw()};core.comps.resizegrip.onmouseover=function(){if(this.enabled)this.cell.style.cursor="se-resize"};core.comps.resizegrip.onmouseout=function(){this.cell.style.cursor="default"};core.comps.resizegrip.on=function(){if(this.enabled)this.turnOnDrag(this,null,0,this._dragStart,this._dragMove,this._dragEnd)};core.comps.resizegrip.off=function(){this.turnOffDrag()};core.comps.resizegrip._dragStart=function(e){var d=dragObj.elm;if(d.enabled){this.startW=dragObj.source.getW();this.startH=dragObj.source.getH();if(d.fStart!="undefined")eval(d.fStart)}};core.comps.resizegrip._dragMove=function(x,y,dX,dY){var d=dragObj.elm;var ds=dragObj.source;if(d.enabled){ds.setSize(this.startW+dX,this.startH+dY);if(ds.getW()<d.minW&&ds.getW()>-d.minW)ds.setW(d.minW);if(ds.getH()<d.minH&&ds.getH()>-d.minH)ds.setH(d.minH);if(ds.getW()>d.maxW)ds.setW(d.maxW);if(ds.getH()>d.maxH)ds.setH(d.maxH);d.moveTo(ds.getW()-d.getW()-d.margin,ds.getH()-d.getH()-d.margin);if(d.fMove!="undefined")eval(d.fMove)}};core.comps.resizegrip._dragEnd=function(e){var d=dragObj.elm;if(d.enabled){if(d.fEnd!="undefined")eval(d.fEnd)}};
