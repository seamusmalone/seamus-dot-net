// Copyright 2001-2003, Nebiru Software
// www.domapi.com
core.loadUnit("label");core.registerComponent("statusbar");function Statusbar(arg){arg.w=core.rInt(arg["w"],400);arg.h=core.rInt(arg["h"],16);var e=core._component(arg,"statusbar");var t=core.comps.statusbar;e.margin=6;e.gap=2;if(arg.parent){e.setX(e.gap);e.setY(arg.parent.getH()-e.getH()-e.margin);e.setW(arg.parent.getW()-e.margin-e.gap)}if(arg.panels){for(var a=0;a<arg.panels;a++){e.addPanel();e.doResize()}}core.disallowSelect(e);e.reDraw();return e};core.comps.statusbar.reDraw=function(){this.statusbarReDraw();this.onredraw()};core.comps.statusbar.statusbarReDraw=function(){this.setB(0);this.style.borderColor=this.theme.getOutset();this.style.backgroundColor=this.theme.ctrlBgColor;this.style.borderStyle=this.theme.bdrSolid;this.style.cursor="default";var t;for(var a=0;a<this.childNodes.length;a++){t=this.childNodes[a];if(typeof t.reDraw=="function"){t.theme=this.theme;t.reDraw()}}};core.comps.statusbar.addPanel=function(minW,t,caption,tAlign,vAlign){var panel=Label({parent:this,x:0,w:core.rInt(minW,50),h:this.getH(),caption:"<nobr>"+core.rVal(caption,' ')+"</nobr>"});with(panel.style){borderStyle="inset";borderWidth="1px";overflow="hidden"}panel.type=core.rInt(t,1);panel.setW(core.rInt(minW,50));panel.setH(this.getH());panel.minW=core.rInt(minW,50);panel.setTextAlign(core.rVal(tAlign,"left"));panel.setVerticalAlign(core.rVal(vAlign,"top"));panel.domAPIObjType="STATUSBARPANEL"};core.comps.statusbar.doResize=function(){var n=this.childNodes;var nl=n.length;var w=this.getW();var g=this.gap;var fw=0;var fc=0;var sc=0;if(!nl)return false;if(nl==1){n[0].setX(0);n[0].setW(w)}else{n[0].setX(0);if(n[0].type==1){sc++}else{n[0].setW(n[0].minW);fw=n[0].getW();fc++}for(var a=1;a<nl;a++){if(n[a].type==1){sc++}else{n[a].setW(n[a].minW);fw=fw+n[a].getW();fc++}}for(var a=0;a<nl;a++){if(n[a].type==1){if(w/nl-g<n[a].minW){n[a].setW(n[a].minW)}else{n[a].setW((w-fw)/sc-g)}}var c=0;for(var b=0;b<a;b++){c=c+n[b].getW()+g}n[a].setX(c)}if(n[a-1].type==1)n[a-1].setW(w-n[a-1].getX());else n[a-1].setW(n[a-1].minW-g)}};
