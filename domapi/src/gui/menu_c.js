// Copyright 2001-2003, Nebiru Software
// www.domapi.com
core.loadUnit("shadow");core.loadUnit("menuitem");core.registerComponent("menu");core.comps.menu.chevron="&gt;";function Menu(arg){arg.w=core.rInt(arg["desiredW"],100);arg.h=200;var p=arg["parent"];var e=core._component(arg,"menu");e.shadowW=core.rInt(arg["shadowW"]);e.setP(1);e.setM(1);e.setZ(p?p.style.zIndex:10);e.style.cursor="default";e.setOverflow("hidden");e.timer=null;core.shadow.dropShadow(e,e.shadowW);e.hide();core.disallowSelect(e);e.reDraw();return e};core.comps.menu.onselect=function(item){};core.comps.menu.reDraw=function(){this.menuReDraw();this.onredraw()};core.comps.menu.menuReDraw=function(){this.setB(this.theme.bdrWidth);this.setColor(this.theme.ctrlFgColor);this.setBgColor(this.theme.ctrlBgColor);with(this.style){font=this.theme.font;borderStyle=this.theme.bdrSolid;borderColor=this.theme.getOutset()}for(var b=0;b<this.childNodes.length;b++){with(this.childNodes[b].style){font=this.theme.ctrlFont;backgroundColor=this.theme.ctrlBgColor;color=this.theme.ctrlFgColor}if(this.childNodes[b].dropDown){this.childNodes[b].dropDown.theme=this.theme;this.childNodes[b].dropDown.reDraw()}}if(this.childNodes.length>0){var n=this.childNodes[this.childNodes.length-1];this.setH(parseInt(n.offsetTop)+parseInt(n.offsetHeight)+parseInt(this.theme.bdrWidth)*2+3)}if(typeof this.onredraw=="function")this.onredraw();this.moveShadow()};core.comps.menu.addItem=function(caption,fn){var n=Menuitem({parent:this,caption:caption,fn:fn});this.appendChild(n);this.setH(parseInt(n.offsetTop)+parseInt(n.offsetHeight)+parseInt(this.theme.bdrWidth)*2);this.moveShadow();return n};core.comps.menu.addSeparator=function(s){var t=this.appendChild(document.createElement("DIV"));with(t.style){position="relative";textAlign="center"}if(s){t.innerHTML=s;t.style.margin="0px 5px"}else with(t.style){borderBottom="1px solid "+this.theme.bdrLight;borderTop="1px solid "+this.theme.bdrDark;margin="5px 4px 3px 4px";if(core.isIE50){width="100%";overflow="hidden";height="2px"}}this.moveShadow()};core.comps.menu.onmouseover=function(e){if(this.timer)clearTimeout(this.timer);var temp=core.findTarget(e,"MENUITEM");if(!temp)return;if(!temp.enabled)return;core.preventBubble(e);var root=temp.parentNode;if(!temp||temp.selected)return;temp.style.color=root.theme.hlFgColor;temp.style.backgroundColor=root.theme.hlBgColor;if(temp.cascadeIcon){temp.cascadeIcon.style.color=root.theme.hlFgColor;temp.cascadeIcon.style.backgroundColor=root.theme.hlBgColor}core.comps.menu._closeSiblings(temp);if(temp.dropDown){temp.parentNode.isOpen=true;temp.dropDown.style.left=parseInt(root.offsetLeft)+parseInt(root.offsetWidth)+"px";temp.dropDown.style.top=parseInt(root.offsetTop)+parseInt(temp.offsetTop)+"px";temp.dropDown.moveShadow();temp.dropDown.show()}var tds=temp.getElementsByTagName("TD");for(var b in tds)if(tds[b].style)with(tds[b].style){color=root.theme.hlFgColor;backgroundColor=root.theme.hlBgColor}};core.comps.menu._closeSiblings=function(e){e=e.parentNode.childNodes;for(var a=0;a<e.length;a++)if(e[a].dropDown){if(e[a].dropDown.timer)clearTimeout(e[a].dropDown.timer);e[a].dropDown.hide()}};core.comps.menu.onmouseout=function(e){var temp=core.findTarget(e,"MENUITEM");if(!temp)return;if(!temp.enabled)return;var root=temp.parentNode;if(!temp||temp.selected)return;temp.style.color=root.theme.ctrlFgColor;temp.style.backgroundColor=root.theme.ctrlBgColor;temp.style.whiteSpace="nowrap";if(temp.cascadeIcon){temp.cascadeIcon.style.color=root.theme.ctrlFgColor;temp.cascadeIcon.style.backgroundColor=root.theme.ctrlBgColor}if(temp.dropDown){if(temp.dropDown.timer)clearTimeout(temp.dropDown.timer);temp.dropDown.timer=setTimeout("core.bags.elms["+temp.dropDown.domAPIIndex+"].hide()",400)}};core.comps.menu.hideAllMenus=function(){var t;for(var a=0;a<this.childNodes.length;a++){t=this.childNodes[a];if(t.dropDown){t.dropDown.hide();t.isOpened=false;t.dropDown.hideAllMenus()}}};
