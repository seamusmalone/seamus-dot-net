// Copyright 2001-2003, Nebiru Software
// www.domapi.com
if(typeof sysutils!="Object")var sysutils={};sysutils.now=function(){return new Date()};sysutils.stateCodes="AK/AL/AR/AS/AZ/CA/CO/CT/DC/DE/FL/GA/GU/HI/IA/ID/IL/IN/KS/KY/LA/MA/MD/ME/MI/MN/MO/MP/MS/MT/NC/ND/NE/NH/NJ/NM/NV/NY/OH/OK/OR/PA/PR/RI/SC/SD/TN/TX/UT/VA/VI/VT/WA/WI/WV/WY";sysutils.stateCodes=sysutils.stateCodes.split("/");sysutils.monthLength=[31,28,31,30,31,30,31,31,30,31,30,31];sysutils.defaultDateMask="mm/dd/yyyy";sysutils.isInteger=function(s){return s==parseInt(s,10)};sysutils.isFloat=function(s){if(core.isNil(s))return false;return s==String(s).match(/\d*\.{0,1}\d*/)[0]};sysutils.isMoney=function(s){if(core.isNil(s))return false;return s==String(s).match(/^\${0,1}\d*\.{0,1}\d{0,2}/)[0]};sysutils.isStateCode=function(s){return sysutils.stateCodes.indexOf(String(s).toUpperCase())>-1};String.prototype.trim=function(){var s=this.replace(/^\s+/g,"");return s.replace(/\s+$/g,"")};sysutils.trim=function(s){if(core.isNil(s))return s;s=String(s).replace(/^\s+/g,"");return s.replace(/\s+$/g,"")};sysutils.rightStr=function(s,n){s=String(s);return s.substr(s.length-n,n)};sysutils.filterChars=function(s,c){var r=new RegExp();r.compile(c,"gi");return String(s).replace(r,"")};sysutils.formatString=function(s,p){if(!p||!p.length)return s;var r=s;var re;for(var a=0;a<p.length;a++){re=new RegExp("%"+(a+1),"g");r=r.replace(re,p[a])}return r};sysutils.filterNonDigits=function(s){return String(s).replace(/[^\d\.]/g,"")};sysutils.padZeros=function(s,n){s=String(s);while(s.length<n)s="0"+s;return s};sysutils.roundTo=function(s,d){var B=s==6.996;var r,i,a,b,c;r=s*Math.pow(10,d);r=Math.round(r);c=String(r).length;r=String(r/Math.pow(10,d));if(isNaN(r))return r;i=r.indexOf(".");if(i<1){r+=".";for(a=0;a<d;a++)r+="0"}else{b=r.length-i-1;for(a=0;a<d-b;a++)r+="0";r=r.substr(0,c+1+d)}return r};sysutils.bintodec=function(s){return parseInt(s,2)};sysutils.dectobin=function(i){return parseInt(i).toString(2)};sysutils.makeFourDigitYear=function(s){if(s.length>2)return s;if(s<50)return "20"+sysutils.padZeros(s,2);else return "19"+s};sysutils.getMonthLength=function(m,y){y=sysutils.makeFourDigitYear(y);m=parseInt(m,10);if(m==1)if(y/4==Math.floor(y/4)||y/400==Math.floor(y/400))return 29;return sysutils.monthLength[m]};sysutils.addDaysToDate=function(d,n){d=new Date(d);n=parseInt(n);var month=d.getMonth();var day=d.getDate();var year=d.getFullYear();var tempday=day+n;if(tempday<1){month--;if(month<0)month=11;tempday=sysutils.getMonthLength(month,year)-tempday}if(tempday>sysutils.getMonthLength(month,year)){tempday=sysutils.getMonthLength(month,year)-tempday;month++;if(month>11)month=0}return sysutils.createDate(month,tempday,year)};sysutils.formatDate=function(d,f){f=core.rVal(f,sysutils.defaultDateMask);var del=null;if(f.indexOf("/")>-1)del="/";else if(f.indexOf("-")>-1)del="-";else if(f.indexOf(".")>-1)del=".";if(!del)return;f=f.split(del);d=new Date(d);for(var a=0;a<f.length;a++){f[a]=sysutils.trim(f[a].toUpperCase());if(f[a].charAt(0)=="M")f[a]=sysutils.padZeros(d.getMonth()+1,f[a].length);if(f[a].charAt(0)=="D")f[a]=sysutils.padZeros(d.getDate(),f[a].length);if(f[a].charAt(0)=="Y")f[a]=sysutils.padZeros(sysutils.rightStr(d.getFullYear(),f[a].length))}var r=f[0];for(a=1;a<f.length;a++)r+=del+f[a];return r};sysutils.isDate=function(d,f){d=sysutils.trim(String(d));f=core.rVal(f,sysutils.defaultDateMask);var del=null;if(f.indexOf("/")>-1)del="/";else if(f.indexOf("-")>-1)del="-";else if(f.indexOf(".")>-1)del=".";if(!del)return false;f=f.split(del);d=d.split(del);if(d.length!=f.length)return false;var mo=null;var da=null;var yr=null;for(var a=0;a<f.length;a++){f[a]=sysutils.trim(f[a].toUpperCase());if(f[a].charAt(0)=="M")mo=sysutils.padZeros(d[a],f[a].length);if(f[a].charAt(0)=="D")da=sysutils.padZeros(d[a],f[a].length);if(f[a].charAt(0)=="Y")yr=sysutils.padZeros(d[a],f[a].length)}if(!sysutils.isInteger(mo)||!sysutils.isInteger(da)||!sysutils.isInteger(yr))return false;if((mo<1)||(mo>12))return false;if((da<1)||(mo>sysutils.getMonthLength(mo-1,yr)))return false;mo=parseInt(mo,10)-1;da=parseInt(da,10);yr=parseInt(yr,10);return new Date(yr,mo,da)};sysutils.getStartDay=function(m,y){var tempdate=new Date();tempdate.setDate(1);tempdate.setMonth(m);tempdate.setFullYear(y);return tempdate.getDay()};sysutils.createDate=function(m,d,y){return sysutils.formatDate(new Date(parseInt(y,10),parseInt(m,10),parseInt(d,10)))};sysutils.daysSince=function(d1,d2){return Math.abs(Math.floor((d1-d2)/86400000))};sysutils.selectedRadio=function(f){for(var a=0;a<f.length;a++)if(f[a].checked)return a;return-1};
